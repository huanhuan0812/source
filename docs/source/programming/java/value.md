---
title: "变量"
order: 2
---
# Java 变量详解

变量是Java程序中最基本的存储单元，用于存储数据值。下面我将从多个方面详细讲解Java中的变量。

## 一、变量的基本概念

### 1. 变量定义
变量是内存中的一块存储区域，用于保存程序运行期间可以改变的数据。

### 2. 变量三要素
- **变量名**：标识变量的名称
- **变量类型**：决定变量存储的数据类型和大小
- **变量值**：变量中存储的具体数据

## 二、变量的声明与初始化

### 1. 变量声明语法
```java
数据类型 变量名;
```

### 2. 变量初始化语法
```java
数据类型 变量名 = 初始值;
```

### 3. 示例
```java
int age;          // 声明一个整型变量
age = 25;         // 赋值

double price = 9.99;  // 声明并初始化
String name = "张三"; // 声明并初始化字符串
```

## 三、变量的分类

### 1. 按数据类型分类
- **基本数据类型变量**：存储简单数据
  - 整型：byte, short, int, long
  - 浮点型：float, double
  - 字符型：char
  - 布尔型：boolean

- **引用数据类型变量**：存储对象引用
  - 类(class)
  - 接口(interface)
  - 数组

### 2. 按声明位置分类
- **成员变量（类变量/实例变量）**
  - 声明在类中，方法外
  - 有默认初始值
  - 生命周期与对象相同

```java
public class Person {
    String name;    // 实例变量
    static int count; // 类变量（静态变量）
}
```

- **局部变量**
  - 声明在方法、构造方法或代码块内
  - 必须显式初始化才能使用
  - 生命周期仅限于所在代码块

```java
public void method() {
    int localVar = 10; // 局部变量
}
```

## 四、变量命名规则

1. 由字母、数字、下划线(_)和美元符号($)组成
2. 不能以数字开头
3. 不能是Java关键字或保留字
4. 区分大小写
5. 建议遵循驼峰命名法（camelCase）

**良好命名示例**：
```java
int studentAge;
String firstName;
double accountBalance;
```

## 五、变量的作用域

### 1. 类变量（静态变量）
- 使用`static`修饰
- 类加载时创建，程序结束时销毁
- 被所有对象共享

```java
class Counter {
    static int count = 0; // 类变量
}
```

### 2. 实例变量
- 每个对象独有一份
- 对象创建时创建，对象被回收时销毁

```java
class Person {
    String name; // 实例变量
}
```

### 3. 局部变量
- 仅在声明它的代码块内有效
- 方法执行时创建，执行完毕销毁

```java
public void method() {
    int x = 10; // 局部变量
    if(x > 5) {
        int y = 20; // 块级局部变量
    }
    // y 在这里不可访问
}
```

## 六、变量的默认值

### 1. 成员变量的默认值
- byte, short, int, long → 0
- float, double → 0.0
- char → '\u0000'
- boolean → false
- 引用类型 → null

### 2. 局部变量没有默认值
必须显式初始化后才能使用，否则编译错误

```java
public void test() {
    int x;      // 声明但未初始化
    // System.out.println(x); // 编译错误
    x = 10;     // 初始化
    System.out.println(x); // 正确
}
```

## 七、final变量（常量）

1. 用`final`修饰的变量只能赋值一次
2. 命名通常全大写，单词间用下划线连接
3. 必须在声明时或构造方法中初始化

```java
final double PI = 3.14159;
final int MAX_VALUE;

public MyClass() {
    MAX_VALUE = 100; // 在构造方法中初始化
}
```

## 八、类型转换

### 1. 自动类型转换（隐式）
- 小类型转大类型
- 不丢失精度

```java
int i = 100;
long l = i; // 自动转换
```

### 2. 强制类型转换（显式）
- 大类型转小类型
- 可能丢失精度

```java
double d = 100.04;
long l = (long)d; // 强制转换，值为100
```

## 九、变量使用注意事项

1. 尽量在靠近第一次使用的地方声明变量
2. 避免使用单个字符作为变量名（循环变量除外）
3. 成员变量不要使用public修饰，应该通过方法访问
4. 局部变量作用范围应尽可能小
5. 对于不会改变的变量，使用final修饰

## 十、变量内存分析

```java
int a = 10;          // 基本类型，值直接存储在栈内存
String s = "hello";  // 引用类型，栈内存存储引用，堆内存存储对象

int[] arr = new int[3]; // 数组也是引用类型
```

理解变量的内存分配有助于避免常见错误，如空指针异常等。